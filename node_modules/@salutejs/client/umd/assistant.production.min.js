!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).assistant={})}(this,(function(exports){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var __assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function __rest(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function __spreadArrays(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}var getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),rnds8=new Uint8Array(16);function rng(){if(!getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}for(var byteToHex=[],i=0;i<256;++i)byteToHex[i]=(i+256).toString(16).substr(1);function bytesToUuid(e,t){var n=t||0,r=byteToHex;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}function v4(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||rng)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var i=0;i<16;++i)t[r+i]=o[i];return t||bytesToUuid(o)}var createNanoEvents=function(){var e={},t=function(t,n){return(e[t]=e[t]||[]).push(n),function(){e[t]=e[t].filter((function(e){return e!==n}))}};return{events:e,emit:function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];for(var o=0,i=e[t]||[];o<i.length;o++){var s=i[o];s.apply(void 0,n)}},on:t,once:function(e,n){var r=t(e,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.apply(void 0,e),r()}));return r},clear:function(){e={}}}},createNanoObservable=function(e){var t=createNanoEvents(),n=t.on,r=t.emit;return e({next:function(e){r("next",e)}}),{subscribe:function(e){var t=e.next;return{unsubscribe:n("next",t)}}}},isDeepEqual=function(e,t){if("object"!=typeof e||null===e)return e===t;if(Array.isArray(e))return!(!Array.isArray(t)||e.length!==t.length)&&!e.some((function(e,n){return!isDeepEqual(e,t[n])}));if("object"!=typeof t||null===t)return!1;var n=Object.entries(e),r=Object.entries(t);return n.length===r.length&&!n.some((function(e){var n=e[0],r=e[1];return!(n in t&&isDeepEqual(r,t[n]))}))},findCommandIndex=function(e,t){return"character"===t.type?e.findIndex((function(e){return"character"===e.type&&e.character.id===t.character.id})):["insets","minimum_static_insets","maximum_static_insets","dynamic_insets"].includes(t.type)?e.findIndex((function(e){return e.type===t.type})):"app_context"===t.type?e.findIndex((function(e){return"app_context"===e.type})):e.findIndex((function(e){return isDeepEqual(e,t)}))},appInitialData=(isPulled=!1,pulled=[],committed=[],diff=[],{pull:function(){return isPulled=!0,pulled=__spreadArrays(window.appInitialData||[]),__spreadArrays(pulled)},get:function(){return __spreadArrays(window.appInitialData||[])},commit:function(){committed=__spreadArrays(window.appInitialData||[]),diff=!0===isPulled?(window.appInitialData||[]).filter((function(e){return!(findCommandIndex(pulled,e)>=0)})):__spreadArrays(window.appInitialData||[])},diff:function(){return __spreadArrays(diff)},isCommitted:function(e){var t=findCommandIndex(committed,e),n=t>=0;return n&&committed.splice(t,1),n},find:function(e){var t=e.type,n=e.command,r=__spreadArrays(window.appInitialData||[]).find((function(e){return!(n||!t||t!==e.type)||(n&&"smart_app_data"in e?n===e.smart_app_data.command||n===e.smart_app_data.type:void 0)}));return r&&"smart_app_data"in r?r.smart_app_data:r}}),isPulled,pulled,committed,diff,commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return commonjsRequire(e,null==t?n.path:t)}},n.exports),n.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var aspromise=asPromise;function asPromise(e,t){for(var n=new Array(arguments.length-1),r=0,o=2,i=!0;o<arguments.length;)n[r++]=arguments[o++];return new Promise((function(o,s){n[r]=function(e){if(i)if(i=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];o.apply(null,t)}};try{e.apply(t||null,n)}catch(e){i&&(i=!1,s(e))}}))}var base64_1=createCommonjsModule((function(e,t){var n=t;n.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var r=new Array(64),o=new Array(123),i=0;i<64;)o[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;n.encode=function(e,t,n){for(var o,i=null,s=[],a=0,u=0;t<n;){var l=e[t++];switch(u){case 0:s[a++]=r[l>>2],o=(3&l)<<4,u=1;break;case 1:s[a++]=r[o|l>>4],o=(15&l)<<2,u=2;break;case 2:s[a++]=r[o|l>>6],s[a++]=r[63&l],u=0}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0)}return u&&(s[a++]=r[o],s[a++]=61,1===u&&(s[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";n.decode=function(e,t,n){for(var r,i=n,a=0,u=0;u<e.length;){var l=e.charCodeAt(u++);if(61===l&&a>1)break;if(void 0===(l=o[l]))throw Error(s);switch(a){case 0:r=l,a=1;break;case 1:t[n++]=r<<2|(48&l)>>4,r=l,a=2;break;case 2:t[n++]=(15&r)<<4|(60&l)>>2,r=l,a=3;break;case 3:t[n++]=(3&r)<<6|l,a=0}}if(1===a)throw Error(s);return n-i},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}})),eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},EventEmitter.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},EventEmitter.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this};var float_1=factory(factory);function factory(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function o(e,r,o){t[0]=e,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3]}function i(e,r,o){t[0]=e,r[o]=n[3],r[o+1]=n[2],r[o+2]=n[1],r[o+3]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function a(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?o:i,e.writeFloatBE=r?i:o,e.readFloatLE=r?s:a,e.readFloatBE=r?a:s}():function(){function t(e,t,n,r){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,n,r)}}function n(e,t,n){var r=e(t,n),o=2*(r>>31)+1,i=r>>>23&255,s=8388607&r;return 255===i?s?NaN:o*(1/0):0===i?1401298464324817e-60*o*s:o*Math.pow(2,i-150)*(s+8388608)}e.writeFloatLE=t.bind(null,writeUintLE),e.writeFloatBE=t.bind(null,writeUintBE),e.readFloatLE=n.bind(null,readUintLE),e.readFloatBE=n.bind(null,readUintBE)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function o(e,r,o){t[0]=e,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3],r[o+4]=n[4],r[o+5]=n[5],r[o+6]=n[6],r[o+7]=n[7]}function i(e,r,o){t[0]=e,r[o]=n[7],r[o+1]=n[6],r[o+2]=n[5],r[o+3]=n[4],r[o+4]=n[3],r[o+5]=n[2],r[o+6]=n[1],r[o+7]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function a(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?o:i,e.writeDoubleBE=r?i:o,e.readDoubleLE=r?s:a,e.readDoubleBE=r?a:s}():function(){function t(e,t,n,r,o,i){var s=r<0?1:0;if(s&&(r=-r),0===r)e(0,o,i+t),e(1/r>0?0:2147483648,o,i+n);else if(isNaN(r))e(0,o,i+t),e(2146959360,o,i+n);else if(r>17976931348623157e292)e(0,o,i+t),e((s<<31|2146435072)>>>0,o,i+n);else{var a;if(r<22250738585072014e-324)e((a=r/5e-324)>>>0,o,i+t),e((s<<31|a/4294967296)>>>0,o,i+n);else{var u=Math.floor(Math.log(r)/Math.LN2);1024===u&&(u=1023),e(4503599627370496*(a=r*Math.pow(2,-u))>>>0,o,i+t),e((s<<31|u+1023<<20|1048576*a&1048575)>>>0,o,i+n)}}}function n(e,t,n,r,o){var i=e(r,o+t),s=e(r,o+n),a=2*(s>>31)+1,u=s>>>20&2047,l=4294967296*(1048575&s)+i;return 2047===u?l?NaN:a*(1/0):0===u?5e-324*a*l:a*Math.pow(2,u-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,writeUintLE,0,4),e.writeDoubleBE=t.bind(null,writeUintBE,4,0),e.readDoubleLE=n.bind(null,readUintLE,0,4),e.readDoubleBE=n.bind(null,readUintBE,4,0)}(),e}function writeUintLE(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function writeUintBE(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8_1=createCommonjsModule((function(e,t){var n=t;n.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},n.read=function(e,t,n){if(n-t<1)return"";for(var r,o=null,i=[],s=0;t<n;)(r=e[t++])<128?i[s++]=r:r>191&&r<224?i[s++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(r>>10),i[s++]=56320+(1023&r)):i[s++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),s=0);return o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))},n.write=function(e,t,n){for(var r,o,i=n,s=0;s<e.length;++s)(r=e.charCodeAt(s))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(o=e.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&o),++s,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-i}})),pool_1=pool;function pool(e,t,n){var r=n||8192,o=r>>>1,i=null,s=r;return function(n){if(n<1||n>o)return e(n);s+n>r&&(i=e(r),s=0);var a=t.call(i,s,s+=n);return 7&s&&(s=1+(7|s)),a}}var longbits=LongBits;function LongBits(e,t){this.lo=e>>>0,this.hi=t>>>0}var zero=LongBits.zero=new LongBits(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function(e){if(0===e)return zero;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new LongBits(n,r)},LongBits.from=function(e){if("number"==typeof e)return LongBits.fromNumber(e);if(minimal.isString(e)){if(!minimal.Long)return LongBits.fromNumber(parseInt(e,10));e=minimal.Long.fromString(e)}return e.low||e.high?new LongBits(e.low>>>0,e.high>>>0):zero},LongBits.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},LongBits.prototype.toLong=function(e){return minimal.Long?new minimal.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var charCodeAt=String.prototype.charCodeAt;LongBits.fromHash=function(e){return e===zeroHash?zero:new LongBits((charCodeAt.call(e,0)|charCodeAt.call(e,1)<<8|charCodeAt.call(e,2)<<16|charCodeAt.call(e,3)<<24)>>>0,(charCodeAt.call(e,4)|charCodeAt.call(e,5)<<8|charCodeAt.call(e,6)<<16|charCodeAt.call(e,7)<<24)>>>0)},LongBits.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},LongBits.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},LongBits.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10};var minimal=createCommonjsModule((function(e,t){var n=t;function r(e,t,n){for(var r=Object.keys(t),o=0;o<r.length;++o)void 0!==e[r[o]]&&n||(e[r[o]]=t[r[o]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&r(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=aspromise,n.base64=base64_1,n.EventEmitter=eventemitter,n.float=float_1,n.inquire=inquire_1,n.utf8=utf8_1,n.pool=pool_1,n.LongBits=longbits,n.isNode=Boolean(void 0!==commonjsGlobal&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),n.global=n.isNode&&commonjsGlobal||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||commonjsGlobal,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=r,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=o,n.ProtocolError=o("ProtocolError"),n.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},n.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}})),writer=Writer,BufferWriter,LongBits$1=minimal.LongBits,base64=minimal.base64,utf8=minimal.utf8;function Op(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function noop(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create=function(){return minimal.Buffer?function(){return(Writer.create=function(){return new BufferWriter})()}:function(){return new Writer}};function writeByte(e,t,n){t[n]=255&e}function writeVarint32(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t}function writeVarint64(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function writeFixed32(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}Writer.create=create(),Writer.alloc=function(e){return new minimal.Array(e)},minimal.Array!==Array&&(Writer.alloc=minimal.pool(Writer.alloc,minimal.Array.prototype.subarray)),Writer.prototype._push=function(e,t,n){return this.tail=this.tail.next=new Op(e,t,n),this.len+=t,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Writer.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Writer.prototype.uint64=function(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)},Writer.prototype.bool=function(e){return this._push(writeByte,1,e?1:0)},Writer.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function(e){return this._push(minimal.float.writeFloatLE,4,e)},Writer.prototype.double=function(e){return this._push(minimal.float.writeDoubleLE,8,e)};var writeBytes=minimal.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};Writer.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(minimal.isString(e)){var n=Writer.alloc(t=base64.length(e));base64.decode(e,n,0),e=n}return this.uint32(t)._push(writeBytes,t,e)},Writer.prototype.string=function(e){var t=utf8.length(e);return t?this.uint32(t)._push(utf8.write,t,e):this._push(writeByte,1,0)},Writer.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},Writer.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},Writer._configure=function(e){BufferWriter=e,Writer.create=create(),BufferWriter._configure()};var writer_buffer=BufferWriter$1;function BufferWriter$1(){writer.call(this)}function writeStringBuffer(e,t,n){e.length<40?minimal.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}(BufferWriter$1.prototype=Object.create(writer.prototype)).constructor=BufferWriter$1,BufferWriter$1._configure=function(){BufferWriter$1.alloc=minimal._Buffer_allocUnsafe,BufferWriter$1.writeBytesBuffer=minimal.Buffer&&minimal.Buffer.prototype instanceof Uint8Array&&"set"===minimal.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},BufferWriter$1.prototype.bytes=function(e){minimal.isString(e)&&(e=minimal._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(BufferWriter$1.writeBytesBuffer,t,e),this},BufferWriter$1.prototype.string=function(e){var t=minimal.Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this},BufferWriter$1._configure();var reader=Reader,BufferReader,LongBits$2=minimal.LongBits,utf8$1=minimal.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader(e){this.buf=e,this.pos=0,this.len=e.length}var create_array="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Reader(e);throw Error("illegal buffer")},create$1=function(){return minimal.Buffer?function(e){return(Reader.create=function(e){return minimal.Buffer.isBuffer(e)?new BufferReader(e):create_array(e)})(e)}:create_array},value;function readLongVarint(){var e=new LongBits$2(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$2(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.create=create$1(),Reader.prototype._slice=minimal.Array.prototype.subarray||minimal.Array.prototype.slice,Reader.prototype.uint32=(value=4294967295,function(){if(value=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return value;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return value}),Reader.prototype.int32=function(){return 0|this.uint32()},Reader.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Reader.prototype.bool=function(){return 0!==this.uint32()},Reader.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Reader.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Reader.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},Reader.prototype.string=function(){var e=this.bytes();return utf8$1.read(e,0,e.length)},Reader.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Reader._configure=function(e){BufferReader=e,Reader.create=create$1(),BufferReader._configure();var t=minimal.Long?"toLong":"toNumber";minimal.merge(Reader.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader$1;function BufferReader$1(e){reader.call(this,e)}(BufferReader$1.prototype=Object.create(reader.prototype)).constructor=BufferReader$1,BufferReader$1._configure=function(){minimal.Buffer&&(BufferReader$1.prototype._slice=minimal.Buffer.prototype.slice)},BufferReader$1.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},BufferReader$1._configure();var service=Service;function Service(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");minimal.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(Service.prototype=Object.create(minimal.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(t,n,r,o,i){if(!o)throw TypeError("request must be specified");var s=this;if(!i)return minimal.asPromise(e,s,t,n,r,o);if(s.rpcImpl)try{return s.rpcImpl(t,n[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return s.emit("error",e,t),i(e);if(null!==n){if(!(n instanceof r))try{n=r[s.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return s.emit("error",e,t),i(e)}return s.emit("data",n,t),i(null,n)}s.end(!0)}))}catch(e){return s.emit("error",e,t),void setTimeout((function(){i(e)}),0)}else setTimeout((function(){i(Error("already ended"))}),0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var rpc_1=createCommonjsModule((function(e,t){t.Service=service})),roots={},indexMinimal=createCommonjsModule((function(e,t){var n=t;function r(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=writer,n.BufferWriter=writer_buffer,n.Reader=reader,n.BufferReader=reader_buffer,n.util=minimal,n.rpc=rpc_1,n.roots=roots,n.configure=r,r()})),minimal$1=indexMinimal,proto=createCommonjsModule((function(e){var t,n,r,o,i,s,a;"function"==typeof commonjsRequire&&e&&e.exports&&(e.exports=(o=(r=minimal$1).Reader,i=r.Writer,s=r.util,(a=r.roots.default||(r.roots.default={})).Message=function(){function e(e){if(this.devContext=[],this.meta={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var t;return e.prototype.userId="",e.prototype.messageId=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.last=0,e.prototype.token="",e.prototype.userChannel="",e.prototype.vpsToken="",e.prototype.devContext=s.emptyArray,e.prototype.messageName="",e.prototype.version=0,e.prototype.voice=null,e.prototype.text=null,e.prototype.systemMessage=null,e.prototype.legacyDevice=null,e.prototype.settings=null,e.prototype.status=null,e.prototype.device=null,e.prototype.bytes=null,e.prototype.initialSettings=null,e.prototype.cancel=null,e.prototype.getHistoryRequest=null,e.prototype.mute=null,e.prototype.timestamp=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.meta=s.emptyObject,Object.defineProperty(e.prototype,"content",{get:s.oneOfGetter(t=["voice","text","systemMessage","legacyDevice","settings","status","device","bytes","initialSettings","cancel","getHistoryRequest","mute"]),set:s.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(10).string(e.userId),null!=e.messageId&&Object.hasOwnProperty.call(e,"messageId")&&t.uint32(16).int64(e.messageId),null!=e.last&&Object.hasOwnProperty.call(e,"last")&&t.uint32(24).int32(e.last),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(34).string(e.token),null!=e.voice&&Object.hasOwnProperty.call(e,"voice")&&a.Voice.encode(e.voice,t.uint32(42).fork()).ldelim(),null!=e.text&&Object.hasOwnProperty.call(e,"text")&&a.Text.encode(e.text,t.uint32(50).fork()).ldelim(),null!=e.systemMessage&&Object.hasOwnProperty.call(e,"systemMessage")&&a.SystemMessage.encode(e.systemMessage,t.uint32(58).fork()).ldelim(),null!=e.legacyDevice&&Object.hasOwnProperty.call(e,"legacyDevice")&&a.LegacyDevice.encode(e.legacyDevice,t.uint32(66).fork()).ldelim(),null!=e.settings&&Object.hasOwnProperty.call(e,"settings")&&a.Settings.encode(e.settings,t.uint32(74).fork()).ldelim(),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&a.Status.encode(e.status,t.uint32(82).fork()).ldelim(),null!=e.userChannel&&Object.hasOwnProperty.call(e,"userChannel")&&t.uint32(90).string(e.userChannel),null!=e.vpsToken&&Object.hasOwnProperty.call(e,"vpsToken")&&t.uint32(98).string(e.vpsToken),null!=e.devContext&&e.devContext.length)for(var n=0;n<e.devContext.length;++n)a.DevContext.encode(e.devContext[n],t.uint32(106).fork()).ldelim();if(null!=e.messageName&&Object.hasOwnProperty.call(e,"messageName")&&t.uint32(114).string(e.messageName),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(120).int32(e.version),null!=e.device&&Object.hasOwnProperty.call(e,"device")&&a.Device.encode(e.device,t.uint32(130).fork()).ldelim(),null!=e.bytes&&Object.hasOwnProperty.call(e,"bytes")&&a.Bytes.encode(e.bytes,t.uint32(138).fork()).ldelim(),null!=e.initialSettings&&Object.hasOwnProperty.call(e,"initialSettings")&&a.InitialSettings.encode(e.initialSettings,t.uint32(146).fork()).ldelim(),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(152).int64(e.timestamp),null!=e.meta&&Object.hasOwnProperty.call(e,"meta")){var r=Object.keys(e.meta);for(n=0;n<r.length;++n)t.uint32(162).fork().uint32(10).string(r[n]).uint32(18).string(e.meta[r[n]]).ldelim()}return null!=e.cancel&&Object.hasOwnProperty.call(e,"cancel")&&a.Cancel.encode(e.cancel,t.uint32(170).fork()).ldelim(),null!=e.getHistoryRequest&&Object.hasOwnProperty.call(e,"getHistoryRequest")&&a.GetHistoryRequest.encode(e.getHistoryRequest,t.uint32(178).fork()).ldelim(),null!=e.mute&&Object.hasOwnProperty.call(e,"mute")&&a.Mute.encode(e.mute,t.uint32(186).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n,r,i=void 0===t?e.len:e.pos+t,u=new a.Message;e.pos<i;){var l=e.uint32();switch(l>>>3){case 1:u.userId=e.string();break;case 2:u.messageId=e.int64();break;case 3:u.last=e.int32();break;case 4:u.token=e.string();break;case 11:u.userChannel=e.string();break;case 12:u.vpsToken=e.string();break;case 13:u.devContext&&u.devContext.length||(u.devContext=[]),u.devContext.push(a.DevContext.decode(e,e.uint32()));break;case 14:u.messageName=e.string();break;case 15:u.version=e.int32();break;case 5:u.voice=a.Voice.decode(e,e.uint32());break;case 6:u.text=a.Text.decode(e,e.uint32());break;case 7:u.systemMessage=a.SystemMessage.decode(e,e.uint32());break;case 8:u.legacyDevice=a.LegacyDevice.decode(e,e.uint32());break;case 9:u.settings=a.Settings.decode(e,e.uint32());break;case 10:u.status=a.Status.decode(e,e.uint32());break;case 16:u.device=a.Device.decode(e,e.uint32());break;case 17:u.bytes=a.Bytes.decode(e,e.uint32());break;case 18:u.initialSettings=a.InitialSettings.decode(e,e.uint32());break;case 21:u.cancel=a.Cancel.decode(e,e.uint32());break;case 22:u.getHistoryRequest=a.GetHistoryRequest.decode(e,e.uint32());break;case 23:u.mute=a.Mute.decode(e,e.uint32());break;case 19:u.timestamp=e.int64();break;case 20:u.meta===s.emptyObject&&(u.meta={});var c=e.uint32()+e.pos;for(n="",r="";e.pos<c;){var f=e.uint32();switch(f>>>3){case 1:n=e.string();break;case 2:r=e.string();break;default:e.skipType(7&f)}}u.meta[n]=r;break;default:e.skipType(7&l)}}return u},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.userId&&e.hasOwnProperty("userId")&&!s.isString(e.userId))return"userId: string expected";if(null!=e.messageId&&e.hasOwnProperty("messageId")&&!(s.isInteger(e.messageId)||e.messageId&&s.isInteger(e.messageId.low)&&s.isInteger(e.messageId.high)))return"messageId: integer|Long expected";if(null!=e.last&&e.hasOwnProperty("last")&&!s.isInteger(e.last))return"last: integer expected";if(null!=e.token&&e.hasOwnProperty("token")&&!s.isString(e.token))return"token: string expected";if(null!=e.userChannel&&e.hasOwnProperty("userChannel")&&!s.isString(e.userChannel))return"userChannel: string expected";if(null!=e.vpsToken&&e.hasOwnProperty("vpsToken")&&!s.isString(e.vpsToken))return"vpsToken: string expected";if(null!=e.devContext&&e.hasOwnProperty("devContext")){if(!Array.isArray(e.devContext))return"devContext: array expected";for(var n=0;n<e.devContext.length;++n)if(r=a.DevContext.verify(e.devContext[n]))return"devContext."+r}if(null!=e.messageName&&e.hasOwnProperty("messageName")&&!s.isString(e.messageName))return"messageName: string expected";if(null!=e.version&&e.hasOwnProperty("version")&&!s.isInteger(e.version))return"version: integer expected";if(null!=e.voice&&e.hasOwnProperty("voice")&&(t.content=1,r=a.Voice.verify(e.voice)))return"voice."+r;if(null!=e.text&&e.hasOwnProperty("text")){if(1===t.content)return"content: multiple values";if(t.content=1,r=a.Text.verify(e.text))return"text."+r}if(null!=e.systemMessage&&e.hasOwnProperty("systemMessage")){if(1===t.content)return"content: multiple values";if(t.content=1,r=a.SystemMessage.verify(e.systemMessage))return"systemMessage."+r}if(null!=e.legacyDevice&&e.hasOwnProperty("legacyDevice")){if(1===t.content)return"content: multiple values";if(t.content=1,r=a.LegacyDevice.verify(e.legacyDevice))return"legacyDevice."+r}if(null!=e.settings&&e.hasOwnProperty("settings")){if(1===t.content)return"content: multiple values";if(t.content=1,r=a.Settings.verify(e.settings))return"settings."+r}if(null!=e.status&&e.hasOwnProperty("status")){if(1===t.content)return"content: multiple values";if(t.content=1,r=a.Status.verify(e.status))return"status."+r}if(null!=e.device&&e.hasOwnProperty("device")){if(1===t.content)return"content: multiple values";if(t.content=1,r=a.Device.verify(e.device))return"device."+r}if(null!=e.bytes&&e.hasOwnProperty("bytes")){if(1===t.content)return"content: multiple values";if(t.content=1,r=a.Bytes.verify(e.bytes))return"bytes."+r}if(null!=e.initialSettings&&e.hasOwnProperty("initialSettings")){if(1===t.content)return"content: multiple values";if(t.content=1,r=a.InitialSettings.verify(e.initialSettings))return"initialSettings."+r}if(null!=e.cancel&&e.hasOwnProperty("cancel")){if(1===t.content)return"content: multiple values";if(t.content=1,r=a.Cancel.verify(e.cancel))return"cancel."+r}if(null!=e.getHistoryRequest&&e.hasOwnProperty("getHistoryRequest")){if(1===t.content)return"content: multiple values";if(t.content=1,r=a.GetHistoryRequest.verify(e.getHistoryRequest))return"getHistoryRequest."+r}if(null!=e.mute&&e.hasOwnProperty("mute")){if(1===t.content)return"content: multiple values";var r;if(t.content=1,r=a.Mute.verify(e.mute))return"mute."+r}if(null!=e.timestamp&&e.hasOwnProperty("timestamp")&&!(s.isInteger(e.timestamp)||e.timestamp&&s.isInteger(e.timestamp.low)&&s.isInteger(e.timestamp.high)))return"timestamp: integer|Long expected";if(null!=e.meta&&e.hasOwnProperty("meta")){if(!s.isObject(e.meta))return"meta: object expected";var o=Object.keys(e.meta);for(n=0;n<o.length;++n)if(!s.isString(e.meta[o[n]]))return"meta: string{k:string} expected"}return null},e.fromObject=function(e){if(e instanceof a.Message)return e;var t=new a.Message;if(null!=e.userId&&(t.userId=String(e.userId)),null!=e.messageId&&(s.Long?(t.messageId=s.Long.fromValue(e.messageId)).unsigned=!1:"string"==typeof e.messageId?t.messageId=parseInt(e.messageId,10):"number"==typeof e.messageId?t.messageId=e.messageId:"object"==typeof e.messageId&&(t.messageId=new s.LongBits(e.messageId.low>>>0,e.messageId.high>>>0).toNumber())),null!=e.last&&(t.last=0|e.last),null!=e.token&&(t.token=String(e.token)),null!=e.userChannel&&(t.userChannel=String(e.userChannel)),null!=e.vpsToken&&(t.vpsToken=String(e.vpsToken)),e.devContext){if(!Array.isArray(e.devContext))throw TypeError(".Message.devContext: array expected");t.devContext=[];for(var n=0;n<e.devContext.length;++n){if("object"!=typeof e.devContext[n])throw TypeError(".Message.devContext: object expected");t.devContext[n]=a.DevContext.fromObject(e.devContext[n])}}if(null!=e.messageName&&(t.messageName=String(e.messageName)),null!=e.version&&(t.version=0|e.version),null!=e.voice){if("object"!=typeof e.voice)throw TypeError(".Message.voice: object expected");t.voice=a.Voice.fromObject(e.voice)}if(null!=e.text){if("object"!=typeof e.text)throw TypeError(".Message.text: object expected");t.text=a.Text.fromObject(e.text)}if(null!=e.systemMessage){if("object"!=typeof e.systemMessage)throw TypeError(".Message.systemMessage: object expected");t.systemMessage=a.SystemMessage.fromObject(e.systemMessage)}if(null!=e.legacyDevice){if("object"!=typeof e.legacyDevice)throw TypeError(".Message.legacyDevice: object expected");t.legacyDevice=a.LegacyDevice.fromObject(e.legacyDevice)}if(null!=e.settings){if("object"!=typeof e.settings)throw TypeError(".Message.settings: object expected");t.settings=a.Settings.fromObject(e.settings)}if(null!=e.status){if("object"!=typeof e.status)throw TypeError(".Message.status: object expected");t.status=a.Status.fromObject(e.status)}if(null!=e.device){if("object"!=typeof e.device)throw TypeError(".Message.device: object expected");t.device=a.Device.fromObject(e.device)}if(null!=e.bytes){if("object"!=typeof e.bytes)throw TypeError(".Message.bytes: object expected");t.bytes=a.Bytes.fromObject(e.bytes)}if(null!=e.initialSettings){if("object"!=typeof e.initialSettings)throw TypeError(".Message.initialSettings: object expected");t.initialSettings=a.InitialSettings.fromObject(e.initialSettings)}if(null!=e.cancel){if("object"!=typeof e.cancel)throw TypeError(".Message.cancel: object expected");t.cancel=a.Cancel.fromObject(e.cancel)}if(null!=e.getHistoryRequest){if("object"!=typeof e.getHistoryRequest)throw TypeError(".Message.getHistoryRequest: object expected");t.getHistoryRequest=a.GetHistoryRequest.fromObject(e.getHistoryRequest)}if(null!=e.mute){if("object"!=typeof e.mute)throw TypeError(".Message.mute: object expected");t.mute=a.Mute.fromObject(e.mute)}if(null!=e.timestamp&&(s.Long?(t.timestamp=s.Long.fromValue(e.timestamp)).unsigned=!1:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new s.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber())),e.meta){if("object"!=typeof e.meta)throw TypeError(".Message.meta: object expected");t.meta={};var r=Object.keys(e.meta);for(n=0;n<r.length;++n)t.meta[r[n]]=String(e.meta[r[n]])}return t},e.toObject=function(e,t){t||(t={});var n,r={};if((t.arrays||t.defaults)&&(r.devContext=[]),(t.objects||t.defaults)&&(r.meta={}),t.defaults){if(r.userId="",s.Long){var o=new s.Long(0,0,!1);r.messageId=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.messageId=t.longs===String?"0":0;r.last=0,r.token="",r.userChannel="",r.vpsToken="",r.messageName="",r.version=0,s.Long?(o=new s.Long(0,0,!1),r.timestamp=t.longs===String?o.toString():t.longs===Number?o.toNumber():o):r.timestamp=t.longs===String?"0":0}if(null!=e.userId&&e.hasOwnProperty("userId")&&(r.userId=e.userId),null!=e.messageId&&e.hasOwnProperty("messageId")&&("number"==typeof e.messageId?r.messageId=t.longs===String?String(e.messageId):e.messageId:r.messageId=t.longs===String?s.Long.prototype.toString.call(e.messageId):t.longs===Number?new s.LongBits(e.messageId.low>>>0,e.messageId.high>>>0).toNumber():e.messageId),null!=e.last&&e.hasOwnProperty("last")&&(r.last=e.last),null!=e.token&&e.hasOwnProperty("token")&&(r.token=e.token),null!=e.voice&&e.hasOwnProperty("voice")&&(r.voice=a.Voice.toObject(e.voice,t),t.oneofs&&(r.content="voice")),null!=e.text&&e.hasOwnProperty("text")&&(r.text=a.Text.toObject(e.text,t),t.oneofs&&(r.content="text")),null!=e.systemMessage&&e.hasOwnProperty("systemMessage")&&(r.systemMessage=a.SystemMessage.toObject(e.systemMessage,t),t.oneofs&&(r.content="systemMessage")),null!=e.legacyDevice&&e.hasOwnProperty("legacyDevice")&&(r.legacyDevice=a.LegacyDevice.toObject(e.legacyDevice,t),t.oneofs&&(r.content="legacyDevice")),null!=e.settings&&e.hasOwnProperty("settings")&&(r.settings=a.Settings.toObject(e.settings,t),t.oneofs&&(r.content="settings")),null!=e.status&&e.hasOwnProperty("status")&&(r.status=a.Status.toObject(e.status,t),t.oneofs&&(r.content="status")),null!=e.userChannel&&e.hasOwnProperty("userChannel")&&(r.userChannel=e.userChannel),null!=e.vpsToken&&e.hasOwnProperty("vpsToken")&&(r.vpsToken=e.vpsToken),e.devContext&&e.devContext.length){r.devContext=[];for(var i=0;i<e.devContext.length;++i)r.devContext[i]=a.DevContext.toObject(e.devContext[i],t)}if(null!=e.messageName&&e.hasOwnProperty("messageName")&&(r.messageName=e.messageName),null!=e.version&&e.hasOwnProperty("version")&&(r.version=e.version),null!=e.device&&e.hasOwnProperty("device")&&(r.device=a.Device.toObject(e.device,t),t.oneofs&&(r.content="device")),null!=e.bytes&&e.hasOwnProperty("bytes")&&(r.bytes=a.Bytes.toObject(e.bytes,t),t.oneofs&&(r.content="bytes")),null!=e.initialSettings&&e.hasOwnProperty("initialSettings")&&(r.initialSettings=a.InitialSettings.toObject(e.initialSettings,t),t.oneofs&&(r.content="initialSettings")),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?r.timestamp=t.longs===String?String(e.timestamp):e.timestamp:r.timestamp=t.longs===String?s.Long.prototype.toString.call(e.timestamp):t.longs===Number?new s.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber():e.timestamp),e.meta&&(n=Object.keys(e.meta)).length)for(r.meta={},i=0;i<n.length;++i)r.meta[n[i]]=e.meta[n[i]];return null!=e.cancel&&e.hasOwnProperty("cancel")&&(r.cancel=a.Cancel.toObject(e.cancel,t),t.oneofs&&(r.content="cancel")),null!=e.getHistoryRequest&&e.hasOwnProperty("getHistoryRequest")&&(r.getHistoryRequest=a.GetHistoryRequest.toObject(e.getHistoryRequest,t),t.oneofs&&(r.content="getHistoryRequest")),null!=e.mute&&e.hasOwnProperty("mute")&&(r.mute=a.Mute.toObject(e.mute,t),t.oneofs&&(r.content="mute")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.InitialSettings=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.userId="",e.prototype.userChannel="",e.prototype.device=null,e.prototype.settings=null,e.prototype.locale="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(10).string(e.userId),null!=e.userChannel&&Object.hasOwnProperty.call(e,"userChannel")&&t.uint32(18).string(e.userChannel),null!=e.device&&Object.hasOwnProperty.call(e,"device")&&a.Device.encode(e.device,t.uint32(26).fork()).ldelim(),null!=e.settings&&Object.hasOwnProperty.call(e,"settings")&&a.Settings.encode(e.settings,t.uint32(34).fork()).ldelim(),null!=e.locale&&Object.hasOwnProperty.call(e,"locale")&&t.uint32(42).string(e.locale),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.InitialSettings;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.userId=e.string();break;case 2:r.userChannel=e.string();break;case 3:r.device=a.Device.decode(e,e.uint32());break;case 4:r.settings=a.Settings.decode(e,e.uint32());break;case 5:r.locale=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.userId&&e.hasOwnProperty("userId")&&!s.isString(e.userId)?"userId: string expected":null!=e.userChannel&&e.hasOwnProperty("userChannel")&&!s.isString(e.userChannel)?"userChannel: string expected":null!=e.device&&e.hasOwnProperty("device")&&(t=a.Device.verify(e.device))?"device."+t:null!=e.settings&&e.hasOwnProperty("settings")&&(t=a.Settings.verify(e.settings))?"settings."+t:null!=e.locale&&e.hasOwnProperty("locale")&&!s.isString(e.locale)?"locale: string expected":null;var t},e.fromObject=function(e){if(e instanceof a.InitialSettings)return e;var t=new a.InitialSettings;if(null!=e.userId&&(t.userId=String(e.userId)),null!=e.userChannel&&(t.userChannel=String(e.userChannel)),null!=e.device){if("object"!=typeof e.device)throw TypeError(".InitialSettings.device: object expected");t.device=a.Device.fromObject(e.device)}if(null!=e.settings){if("object"!=typeof e.settings)throw TypeError(".InitialSettings.settings: object expected");t.settings=a.Settings.fromObject(e.settings)}return null!=e.locale&&(t.locale=String(e.locale)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.userId="",n.userChannel="",n.device=null,n.settings=null,n.locale=""),null!=e.userId&&e.hasOwnProperty("userId")&&(n.userId=e.userId),null!=e.userChannel&&e.hasOwnProperty("userChannel")&&(n.userChannel=e.userChannel),null!=e.device&&e.hasOwnProperty("device")&&(n.device=a.Device.toObject(e.device,t)),null!=e.settings&&e.hasOwnProperty("settings")&&(n.settings=a.Settings.toObject(e.settings,t)),null!=e.locale&&e.hasOwnProperty("locale")&&(n.locale=e.locale),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.Device=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.platformType="",e.prototype.platformVersion="",e.prototype.surface="",e.prototype.surfaceVersion="",e.prototype.features="",e.prototype.capabilities="",e.prototype.deviceId="",e.prototype.deviceManufacturer="",e.prototype.deviceModel="",e.prototype.additionalInfo="",e.prototype.tenant="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.platformType&&Object.hasOwnProperty.call(e,"platformType")&&t.uint32(10).string(e.platformType),null!=e.platformVersion&&Object.hasOwnProperty.call(e,"platformVersion")&&t.uint32(18).string(e.platformVersion),null!=e.surface&&Object.hasOwnProperty.call(e,"surface")&&t.uint32(26).string(e.surface),null!=e.surfaceVersion&&Object.hasOwnProperty.call(e,"surfaceVersion")&&t.uint32(34).string(e.surfaceVersion),null!=e.features&&Object.hasOwnProperty.call(e,"features")&&t.uint32(42).string(e.features),null!=e.capabilities&&Object.hasOwnProperty.call(e,"capabilities")&&t.uint32(50).string(e.capabilities),null!=e.deviceId&&Object.hasOwnProperty.call(e,"deviceId")&&t.uint32(58).string(e.deviceId),null!=e.deviceManufacturer&&Object.hasOwnProperty.call(e,"deviceManufacturer")&&t.uint32(66).string(e.deviceManufacturer),null!=e.deviceModel&&Object.hasOwnProperty.call(e,"deviceModel")&&t.uint32(74).string(e.deviceModel),null!=e.additionalInfo&&Object.hasOwnProperty.call(e,"additionalInfo")&&t.uint32(82).string(e.additionalInfo),null!=e.tenant&&Object.hasOwnProperty.call(e,"tenant")&&t.uint32(90).string(e.tenant),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.Device;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.platformType=e.string();break;case 2:r.platformVersion=e.string();break;case 3:r.surface=e.string();break;case 4:r.surfaceVersion=e.string();break;case 5:r.features=e.string();break;case 6:r.capabilities=e.string();break;case 7:r.deviceId=e.string();break;case 8:r.deviceManufacturer=e.string();break;case 9:r.deviceModel=e.string();break;case 10:r.additionalInfo=e.string();break;case 11:r.tenant=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.platformType&&e.hasOwnProperty("platformType")&&!s.isString(e.platformType)?"platformType: string expected":null!=e.platformVersion&&e.hasOwnProperty("platformVersion")&&!s.isString(e.platformVersion)?"platformVersion: string expected":null!=e.surface&&e.hasOwnProperty("surface")&&!s.isString(e.surface)?"surface: string expected":null!=e.surfaceVersion&&e.hasOwnProperty("surfaceVersion")&&!s.isString(e.surfaceVersion)?"surfaceVersion: string expected":null!=e.features&&e.hasOwnProperty("features")&&!s.isString(e.features)?"features: string expected":null!=e.capabilities&&e.hasOwnProperty("capabilities")&&!s.isString(e.capabilities)?"capabilities: string expected":null!=e.deviceId&&e.hasOwnProperty("deviceId")&&!s.isString(e.deviceId)?"deviceId: string expected":null!=e.deviceManufacturer&&e.hasOwnProperty("deviceManufacturer")&&!s.isString(e.deviceManufacturer)?"deviceManufacturer: string expected":null!=e.deviceModel&&e.hasOwnProperty("deviceModel")&&!s.isString(e.deviceModel)?"deviceModel: string expected":null!=e.additionalInfo&&e.hasOwnProperty("additionalInfo")&&!s.isString(e.additionalInfo)?"additionalInfo: string expected":null!=e.tenant&&e.hasOwnProperty("tenant")&&!s.isString(e.tenant)?"tenant: string expected":null},e.fromObject=function(e){if(e instanceof a.Device)return e;var t=new a.Device;return null!=e.platformType&&(t.platformType=String(e.platformType)),null!=e.platformVersion&&(t.platformVersion=String(e.platformVersion)),null!=e.surface&&(t.surface=String(e.surface)),null!=e.surfaceVersion&&(t.surfaceVersion=String(e.surfaceVersion)),null!=e.features&&(t.features=String(e.features)),null!=e.capabilities&&(t.capabilities=String(e.capabilities)),null!=e.deviceId&&(t.deviceId=String(e.deviceId)),null!=e.deviceManufacturer&&(t.deviceManufacturer=String(e.deviceManufacturer)),null!=e.deviceModel&&(t.deviceModel=String(e.deviceModel)),null!=e.additionalInfo&&(t.additionalInfo=String(e.additionalInfo)),null!=e.tenant&&(t.tenant=String(e.tenant)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.platformType="",n.platformVersion="",n.surface="",n.surfaceVersion="",n.features="",n.capabilities="",n.deviceId="",n.deviceManufacturer="",n.deviceModel="",n.additionalInfo="",n.tenant=""),null!=e.platformType&&e.hasOwnProperty("platformType")&&(n.platformType=e.platformType),null!=e.platformVersion&&e.hasOwnProperty("platformVersion")&&(n.platformVersion=e.platformVersion),null!=e.surface&&e.hasOwnProperty("surface")&&(n.surface=e.surface),null!=e.surfaceVersion&&e.hasOwnProperty("surfaceVersion")&&(n.surfaceVersion=e.surfaceVersion),null!=e.features&&e.hasOwnProperty("features")&&(n.features=e.features),null!=e.capabilities&&e.hasOwnProperty("capabilities")&&(n.capabilities=e.capabilities),null!=e.deviceId&&e.hasOwnProperty("deviceId")&&(n.deviceId=e.deviceId),null!=e.deviceManufacturer&&e.hasOwnProperty("deviceManufacturer")&&(n.deviceManufacturer=e.deviceManufacturer),null!=e.deviceModel&&e.hasOwnProperty("deviceModel")&&(n.deviceModel=e.deviceModel),null!=e.additionalInfo&&e.hasOwnProperty("additionalInfo")&&(n.additionalInfo=e.additionalInfo),null!=e.tenant&&e.hasOwnProperty("tenant")&&(n.tenant=e.tenant),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.Settings=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.dubbing=0,e.prototype.echo=0,e.prototype.ttsEngine="",e.prototype.asrEngine="",e.prototype.asrAutoStop=0,e.prototype.devMode=0,e.prototype.authConnector="",e.prototype.surface="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.dubbing&&Object.hasOwnProperty.call(e,"dubbing")&&t.uint32(8).int32(e.dubbing),null!=e.echo&&Object.hasOwnProperty.call(e,"echo")&&t.uint32(16).int32(e.echo),null!=e.ttsEngine&&Object.hasOwnProperty.call(e,"ttsEngine")&&t.uint32(26).string(e.ttsEngine),null!=e.asrEngine&&Object.hasOwnProperty.call(e,"asrEngine")&&t.uint32(34).string(e.asrEngine),null!=e.asrAutoStop&&Object.hasOwnProperty.call(e,"asrAutoStop")&&t.uint32(40).int32(e.asrAutoStop),null!=e.devMode&&Object.hasOwnProperty.call(e,"devMode")&&t.uint32(48).int32(e.devMode),null!=e.authConnector&&Object.hasOwnProperty.call(e,"authConnector")&&t.uint32(58).string(e.authConnector),null!=e.surface&&Object.hasOwnProperty.call(e,"surface")&&t.uint32(66).string(e.surface),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.Settings;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.dubbing=e.int32();break;case 2:r.echo=e.int32();break;case 3:r.ttsEngine=e.string();break;case 4:r.asrEngine=e.string();break;case 5:r.asrAutoStop=e.int32();break;case 6:r.devMode=e.int32();break;case 7:r.authConnector=e.string();break;case 8:r.surface=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.dubbing&&e.hasOwnProperty("dubbing")&&!s.isInteger(e.dubbing)?"dubbing: integer expected":null!=e.echo&&e.hasOwnProperty("echo")&&!s.isInteger(e.echo)?"echo: integer expected":null!=e.ttsEngine&&e.hasOwnProperty("ttsEngine")&&!s.isString(e.ttsEngine)?"ttsEngine: string expected":null!=e.asrEngine&&e.hasOwnProperty("asrEngine")&&!s.isString(e.asrEngine)?"asrEngine: string expected":null!=e.asrAutoStop&&e.hasOwnProperty("asrAutoStop")&&!s.isInteger(e.asrAutoStop)?"asrAutoStop: integer expected":null!=e.devMode&&e.hasOwnProperty("devMode")&&!s.isInteger(e.devMode)?"devMode: integer expected":null!=e.authConnector&&e.hasOwnProperty("authConnector")&&!s.isString(e.authConnector)?"authConnector: string expected":null!=e.surface&&e.hasOwnProperty("surface")&&!s.isString(e.surface)?"surface: string expected":null},e.fromObject=function(e){if(e instanceof a.Settings)return e;var t=new a.Settings;return null!=e.dubbing&&(t.dubbing=0|e.dubbing),null!=e.echo&&(t.echo=0|e.echo),null!=e.ttsEngine&&(t.ttsEngine=String(e.ttsEngine)),null!=e.asrEngine&&(t.asrEngine=String(e.asrEngine)),null!=e.asrAutoStop&&(t.asrAutoStop=0|e.asrAutoStop),null!=e.devMode&&(t.devMode=0|e.devMode),null!=e.authConnector&&(t.authConnector=String(e.authConnector)),null!=e.surface&&(t.surface=String(e.surface)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.dubbing=0,n.echo=0,n.ttsEngine="",n.asrEngine="",n.asrAutoStop=0,n.devMode=0,n.authConnector="",n.surface=""),null!=e.dubbing&&e.hasOwnProperty("dubbing")&&(n.dubbing=e.dubbing),null!=e.echo&&e.hasOwnProperty("echo")&&(n.echo=e.echo),null!=e.ttsEngine&&e.hasOwnProperty("ttsEngine")&&(n.ttsEngine=e.ttsEngine),null!=e.asrEngine&&e.hasOwnProperty("asrEngine")&&(n.asrEngine=e.asrEngine),null!=e.asrAutoStop&&e.hasOwnProperty("asrAutoStop")&&(n.asrAutoStop=e.asrAutoStop),null!=e.devMode&&e.hasOwnProperty("devMode")&&(n.devMode=e.devMode),null!=e.authConnector&&e.hasOwnProperty("authConnector")&&(n.authConnector=e.authConnector),null!=e.surface&&e.hasOwnProperty("surface")&&(n.surface=e.surface),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.LegacyDevice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.clientType="",e.prototype.channel="",e.prototype.channelVersion="",e.prototype.platformName="",e.prototype.platformVersion="",e.prototype.sdkVersion="",e.prototype.protocolVersion="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.clientType&&Object.hasOwnProperty.call(e,"clientType")&&t.uint32(10).string(e.clientType),null!=e.channel&&Object.hasOwnProperty.call(e,"channel")&&t.uint32(18).string(e.channel),null!=e.channelVersion&&Object.hasOwnProperty.call(e,"channelVersion")&&t.uint32(26).string(e.channelVersion),null!=e.platformName&&Object.hasOwnProperty.call(e,"platformName")&&t.uint32(34).string(e.platformName),null!=e.platformVersion&&Object.hasOwnProperty.call(e,"platformVersion")&&t.uint32(42).string(e.platformVersion),null!=e.sdkVersion&&Object.hasOwnProperty.call(e,"sdkVersion")&&t.uint32(50).string(e.sdkVersion),null!=e.protocolVersion&&Object.hasOwnProperty.call(e,"protocolVersion")&&t.uint32(58).string(e.protocolVersion),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.LegacyDevice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.clientType=e.string();break;case 2:r.channel=e.string();break;case 3:r.channelVersion=e.string();break;case 4:r.platformName=e.string();break;case 5:r.platformVersion=e.string();break;case 6:r.sdkVersion=e.string();break;case 7:r.protocolVersion=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.clientType&&e.hasOwnProperty("clientType")&&!s.isString(e.clientType)?"clientType: string expected":null!=e.channel&&e.hasOwnProperty("channel")&&!s.isString(e.channel)?"channel: string expected":null!=e.channelVersion&&e.hasOwnProperty("channelVersion")&&!s.isString(e.channelVersion)?"channelVersion: string expected":null!=e.platformName&&e.hasOwnProperty("platformName")&&!s.isString(e.platformName)?"platformName: string expected":null!=e.platformVersion&&e.hasOwnProperty("platformVersion")&&!s.isString(e.platformVersion)?"platformVersion: string expected":null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&!s.isString(e.sdkVersion)?"sdkVersion: string expected":null!=e.protocolVersion&&e.hasOwnProperty("protocolVersion")&&!s.isString(e.protocolVersion)?"protocolVersion: string expected":null},e.fromObject=function(e){if(e instanceof a.LegacyDevice)return e;var t=new a.LegacyDevice;return null!=e.clientType&&(t.clientType=String(e.clientType)),null!=e.channel&&(t.channel=String(e.channel)),null!=e.channelVersion&&(t.channelVersion=String(e.channelVersion)),null!=e.platformName&&(t.platformName=String(e.platformName)),null!=e.platformVersion&&(t.platformVersion=String(e.platformVersion)),null!=e.sdkVersion&&(t.sdkVersion=String(e.sdkVersion)),null!=e.protocolVersion&&(t.protocolVersion=String(e.protocolVersion)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.clientType="",n.channel="",n.channelVersion="",n.platformName="",n.platformVersion="",n.sdkVersion="",n.protocolVersion=""),null!=e.clientType&&e.hasOwnProperty("clientType")&&(n.clientType=e.clientType),null!=e.channel&&e.hasOwnProperty("channel")&&(n.channel=e.channel),null!=e.channelVersion&&e.hasOwnProperty("channelVersion")&&(n.channelVersion=e.channelVersion),null!=e.platformName&&e.hasOwnProperty("platformName")&&(n.platformName=e.platformName),null!=e.platformVersion&&e.hasOwnProperty("platformVersion")&&(n.platformVersion=e.platformVersion),null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&(n.sdkVersion=e.sdkVersion),null!=e.protocolVersion&&e.hasOwnProperty("protocolVersion")&&(n.protocolVersion=e.protocolVersion),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.Voice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.data=s.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(10).bytes(e.data),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.Voice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.data=e.bytes();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.data&&e.hasOwnProperty("data")&&!(e.data&&"number"==typeof e.data.length||s.isString(e.data))?"data: buffer expected":null},e.fromObject=function(e){if(e instanceof a.Voice)return e;var t=new a.Voice;return null!=e.data&&("string"==typeof e.data?s.base64.decode(e.data,t.data=s.newBuffer(s.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.data="":(n.data=[],t.bytes!==Array&&(n.data=s.newBuffer(n.data)))),null!=e.data&&e.hasOwnProperty("data")&&(n.data=t.bytes===String?s.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.Text=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.data="",e.prototype.type="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(10).string(e.data),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(18).string(e.type),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.Text;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.data=e.string();break;case 2:r.type=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.data&&e.hasOwnProperty("data")&&!s.isString(e.data)?"data: string expected":null!=e.type&&e.hasOwnProperty("type")&&!s.isString(e.type)?"type: string expected":null},e.fromObject=function(e){if(e instanceof a.Text)return e;var t=new a.Text;return null!=e.data&&(t.data=String(e.data)),null!=e.type&&(t.type=String(e.type)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.data="",n.type=""),null!=e.data&&e.hasOwnProperty("data")&&(n.data=e.data),null!=e.type&&e.hasOwnProperty("type")&&(n.type=e.type),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.SystemMessage=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.data="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(10).string(e.data),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.SystemMessage;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.data=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.data&&e.hasOwnProperty("data")&&!s.isString(e.data)?"data: string expected":null},e.fromObject=function(e){if(e instanceof a.SystemMessage)return e;var t=new a.SystemMessage;return null!=e.data&&(t.data=String(e.data)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.data=""),null!=e.data&&e.hasOwnProperty("data")&&(n.data=e.data),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.Status=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.code=0,e.prototype.description="",e.prototype.technicalDescription="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.description&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),null!=e.technicalDescription&&Object.hasOwnProperty.call(e,"technicalDescription")&&t.uint32(26).string(e.technicalDescription),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.Status;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.code=e.int32();break;case 2:r.description=e.string();break;case 3:r.technicalDescription=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.code&&e.hasOwnProperty("code")&&!s.isInteger(e.code)?"code: integer expected":null!=e.description&&e.hasOwnProperty("description")&&!s.isString(e.description)?"description: string expected":null!=e.technicalDescription&&e.hasOwnProperty("technicalDescription")&&!s.isString(e.technicalDescription)?"technicalDescription: string expected":null},e.fromObject=function(e){if(e instanceof a.Status)return e;var t=new a.Status;return null!=e.code&&(t.code=0|e.code),null!=e.description&&(t.description=String(e.description)),null!=e.technicalDescription&&(t.technicalDescription=String(e.technicalDescription)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.code=0,n.description="",n.technicalDescription=""),null!=e.code&&e.hasOwnProperty("code")&&(n.code=e.code),null!=e.description&&e.hasOwnProperty("description")&&(n.description=e.description),null!=e.technicalDescription&&e.hasOwnProperty("technicalDescription")&&(n.technicalDescription=e.technicalDescription),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.Bytes=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.data=s.newBuffer([]),e.prototype.desc="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(10).bytes(e.data),null!=e.desc&&Object.hasOwnProperty.call(e,"desc")&&t.uint32(18).string(e.desc),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.Bytes;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.data=e.bytes();break;case 2:r.desc=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.data&&e.hasOwnProperty("data")&&!(e.data&&"number"==typeof e.data.length||s.isString(e.data))?"data: buffer expected":null!=e.desc&&e.hasOwnProperty("desc")&&!s.isString(e.desc)?"desc: string expected":null},e.fromObject=function(e){if(e instanceof a.Bytes)return e;var t=new a.Bytes;return null!=e.data&&("string"==typeof e.data?s.base64.decode(e.data,t.data=s.newBuffer(s.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),null!=e.desc&&(t.desc=String(e.desc)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.data="":(n.data=[],t.bytes!==Array&&(n.data=s.newBuffer(n.data))),n.desc=""),null!=e.data&&e.hasOwnProperty("data")&&(n.data=t.bytes===String?s.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),null!=e.desc&&e.hasOwnProperty("desc")&&(n.desc=e.desc),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.DevContext=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.timestampMs=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.data="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.timestampMs&&Object.hasOwnProperty.call(e,"timestampMs")&&t.uint32(16).int64(e.timestampMs),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(26).string(e.data),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.DevContext;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.name=e.string();break;case 2:r.timestampMs=e.int64();break;case 3:r.data=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.name&&e.hasOwnProperty("name")&&!s.isString(e.name)?"name: string expected":null!=e.timestampMs&&e.hasOwnProperty("timestampMs")&&!(s.isInteger(e.timestampMs)||e.timestampMs&&s.isInteger(e.timestampMs.low)&&s.isInteger(e.timestampMs.high))?"timestampMs: integer|Long expected":null!=e.data&&e.hasOwnProperty("data")&&!s.isString(e.data)?"data: string expected":null},e.fromObject=function(e){if(e instanceof a.DevContext)return e;var t=new a.DevContext;return null!=e.name&&(t.name=String(e.name)),null!=e.timestampMs&&(s.Long?(t.timestampMs=s.Long.fromValue(e.timestampMs)).unsigned=!1:"string"==typeof e.timestampMs?t.timestampMs=parseInt(e.timestampMs,10):"number"==typeof e.timestampMs?t.timestampMs=e.timestampMs:"object"==typeof e.timestampMs&&(t.timestampMs=new s.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber())),null!=e.data&&(t.data=String(e.data)),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(n.name="",s.Long){var r=new s.Long(0,0,!1);n.timestampMs=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.timestampMs=t.longs===String?"0":0;n.data=""}return null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),null!=e.timestampMs&&e.hasOwnProperty("timestampMs")&&("number"==typeof e.timestampMs?n.timestampMs=t.longs===String?String(e.timestampMs):e.timestampMs:n.timestampMs=t.longs===String?s.Long.prototype.toString.call(e.timestampMs):t.longs===Number?new s.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber():e.timestampMs),null!=e.data&&e.hasOwnProperty("data")&&(n.data=e.data),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.Cancel=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.Cancel;e.pos<n;){var i=e.uint32();e.skipType(7&i)}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof a.Cancel?e:new a.Cancel},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.Mute=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.Mute;e.pos<n;){var i=e.uint32();e.skipType(7&i)}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof a.Mute?e:new a.Mute},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.GetHistoryRequest=function(){function e(e){if(this.messageTypes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.messageTypes=s.emptyArray,e.prototype.app=null,e.prototype.offset=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.messageTypes&&e.messageTypes.length)for(var n=0;n<e.messageTypes.length;++n)t.uint32(10).string(e.messageTypes[n]);return null!=e.app&&Object.hasOwnProperty.call(e,"app")&&a.App.encode(e.app,t.uint32(18).fork()).ldelim(),null!=e.offset&&Object.hasOwnProperty.call(e,"offset")&&a.Offset.encode(e.offset,t.uint32(26).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.GetHistoryRequest;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.messageTypes&&r.messageTypes.length||(r.messageTypes=[]),r.messageTypes.push(e.string());break;case 2:r.app=a.App.decode(e,e.uint32());break;case 3:r.offset=a.Offset.decode(e,e.uint32());break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.messageTypes&&e.hasOwnProperty("messageTypes")){if(!Array.isArray(e.messageTypes))return"messageTypes: array expected";for(var t=0;t<e.messageTypes.length;++t)if(!s.isString(e.messageTypes[t]))return"messageTypes: string[] expected"}var n;return null!=e.app&&e.hasOwnProperty("app")&&(n=a.App.verify(e.app))?"app."+n:null!=e.offset&&e.hasOwnProperty("offset")&&(n=a.Offset.verify(e.offset))?"offset."+n:null},e.fromObject=function(e){if(e instanceof a.GetHistoryRequest)return e;var t=new a.GetHistoryRequest;if(e.messageTypes){if(!Array.isArray(e.messageTypes))throw TypeError(".GetHistoryRequest.messageTypes: array expected");t.messageTypes=[];for(var n=0;n<e.messageTypes.length;++n)t.messageTypes[n]=String(e.messageTypes[n])}if(null!=e.app){if("object"!=typeof e.app)throw TypeError(".GetHistoryRequest.app: object expected");t.app=a.App.fromObject(e.app)}if(null!=e.offset){if("object"!=typeof e.offset)throw TypeError(".GetHistoryRequest.offset: object expected");t.offset=a.Offset.fromObject(e.offset)}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.messageTypes=[]),t.defaults&&(n.app=null,n.offset=null),e.messageTypes&&e.messageTypes.length){n.messageTypes=[];for(var r=0;r<e.messageTypes.length;++r)n.messageTypes[r]=e.messageTypes[r]}return null!=e.app&&e.hasOwnProperty("app")&&(n.app=a.App.toObject(e.app,t)),null!=e.offset&&e.hasOwnProperty("offset")&&(n.offset=a.Offset.toObject(e.offset,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.App=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.type=null,e.prototype.projectId=null,e.prototype.systemName=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&a.google.protobuf.StringValue.encode(e.type,t.uint32(10).fork()).ldelim(),null!=e.projectId&&Object.hasOwnProperty.call(e,"projectId")&&a.google.protobuf.StringValue.encode(e.projectId,t.uint32(18).fork()).ldelim(),null!=e.systemName&&Object.hasOwnProperty.call(e,"systemName")&&a.google.protobuf.StringValue.encode(e.systemName,t.uint32(26).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.App;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.type=a.google.protobuf.StringValue.decode(e,e.uint32());break;case 2:r.projectId=a.google.protobuf.StringValue.decode(e,e.uint32());break;case 3:r.systemName=a.google.protobuf.StringValue.decode(e,e.uint32());break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.type&&e.hasOwnProperty("type")&&(t=a.google.protobuf.StringValue.verify(e.type))?"type."+t:null!=e.projectId&&e.hasOwnProperty("projectId")&&(t=a.google.protobuf.StringValue.verify(e.projectId))?"projectId."+t:null!=e.systemName&&e.hasOwnProperty("systemName")&&(t=a.google.protobuf.StringValue.verify(e.systemName))?"systemName."+t:null;var t},e.fromObject=function(e){if(e instanceof a.App)return e;var t=new a.App;if(null!=e.type){if("object"!=typeof e.type)throw TypeError(".App.type: object expected");t.type=a.google.protobuf.StringValue.fromObject(e.type)}if(null!=e.projectId){if("object"!=typeof e.projectId)throw TypeError(".App.projectId: object expected");t.projectId=a.google.protobuf.StringValue.fromObject(e.projectId)}if(null!=e.systemName){if("object"!=typeof e.systemName)throw TypeError(".App.systemName: object expected");t.systemName=a.google.protobuf.StringValue.fromObject(e.systemName)}return t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.type=null,n.projectId=null,n.systemName=null),null!=e.type&&e.hasOwnProperty("type")&&(n.type=a.google.protobuf.StringValue.toObject(e.type,t)),null!=e.projectId&&e.hasOwnProperty("projectId")&&(n.projectId=a.google.protobuf.StringValue.toObject(e.projectId,t)),null!=e.systemName&&e.hasOwnProperty("systemName")&&(n.systemName=a.google.protobuf.StringValue.toObject(e.systemName,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.Offset=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.limit=null,e.prototype.contentId=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&a.google.protobuf.StringValue.encode(e.limit,t.uint32(10).fork()).ldelim(),null!=e.contentId&&Object.hasOwnProperty.call(e,"contentId")&&a.google.protobuf.StringValue.encode(e.contentId,t.uint32(18).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.Offset;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.limit=a.google.protobuf.StringValue.decode(e,e.uint32());break;case 2:r.contentId=a.google.protobuf.StringValue.decode(e,e.uint32());break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.limit&&e.hasOwnProperty("limit")&&(t=a.google.protobuf.StringValue.verify(e.limit))?"limit."+t:null!=e.contentId&&e.hasOwnProperty("contentId")&&(t=a.google.protobuf.StringValue.verify(e.contentId))?"contentId."+t:null;var t},e.fromObject=function(e){if(e instanceof a.Offset)return e;var t=new a.Offset;if(null!=e.limit){if("object"!=typeof e.limit)throw TypeError(".Offset.limit: object expected");t.limit=a.google.protobuf.StringValue.fromObject(e.limit)}if(null!=e.contentId){if("object"!=typeof e.contentId)throw TypeError(".Offset.contentId: object expected");t.contentId=a.google.protobuf.StringValue.fromObject(e.contentId)}return t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.limit=null,n.contentId=null),null!=e.limit&&e.hasOwnProperty("limit")&&(n.limit=a.google.protobuf.StringValue.toObject(e.limit,t)),null!=e.contentId&&e.hasOwnProperty("contentId")&&(n.contentId=a.google.protobuf.StringValue.toObject(e.contentId,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.ChatHistoryRequest=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uuid=null,e.prototype.device=null,e.prototype.getHistoryRequest=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.uuid&&Object.hasOwnProperty.call(e,"uuid")&&a.Uuid.encode(e.uuid,t.uint32(10).fork()).ldelim(),null!=e.device&&Object.hasOwnProperty.call(e,"device")&&a.Device.encode(e.device,t.uint32(18).fork()).ldelim(),null!=e.getHistoryRequest&&Object.hasOwnProperty.call(e,"getHistoryRequest")&&a.GetHistoryRequest.encode(e.getHistoryRequest,t.uint32(34).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.ChatHistoryRequest;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.uuid=a.Uuid.decode(e,e.uint32());break;case 2:r.device=a.Device.decode(e,e.uint32());break;case 4:r.getHistoryRequest=a.GetHistoryRequest.decode(e,e.uint32());break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.uuid&&e.hasOwnProperty("uuid")&&(t=a.Uuid.verify(e.uuid))?"uuid."+t:null!=e.device&&e.hasOwnProperty("device")&&(t=a.Device.verify(e.device))?"device."+t:null!=e.getHistoryRequest&&e.hasOwnProperty("getHistoryRequest")&&(t=a.GetHistoryRequest.verify(e.getHistoryRequest))?"getHistoryRequest."+t:null;var t},e.fromObject=function(e){if(e instanceof a.ChatHistoryRequest)return e;var t=new a.ChatHistoryRequest;if(null!=e.uuid){if("object"!=typeof e.uuid)throw TypeError(".ChatHistoryRequest.uuid: object expected");t.uuid=a.Uuid.fromObject(e.uuid)}if(null!=e.device){if("object"!=typeof e.device)throw TypeError(".ChatHistoryRequest.device: object expected");t.device=a.Device.fromObject(e.device)}if(null!=e.getHistoryRequest){if("object"!=typeof e.getHistoryRequest)throw TypeError(".ChatHistoryRequest.getHistoryRequest: object expected");t.getHistoryRequest=a.GetHistoryRequest.fromObject(e.getHistoryRequest)}return t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.uuid=null,n.device=null,n.getHistoryRequest=null),null!=e.uuid&&e.hasOwnProperty("uuid")&&(n.uuid=a.Uuid.toObject(e.uuid,t)),null!=e.device&&e.hasOwnProperty("device")&&(n.device=a.Device.toObject(e.device,t)),null!=e.getHistoryRequest&&e.hasOwnProperty("getHistoryRequest")&&(n.getHistoryRequest=a.GetHistoryRequest.toObject(e.getHistoryRequest,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.Uuid=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.userId="",e.prototype.userChannel="",e.prototype.sub="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(10).string(e.userId),null!=e.userChannel&&Object.hasOwnProperty.call(e,"userChannel")&&t.uint32(18).string(e.userChannel),null!=e.sub&&Object.hasOwnProperty.call(e,"sub")&&t.uint32(26).string(e.sub),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.Uuid;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.userId=e.string();break;case 2:r.userChannel=e.string();break;case 3:r.sub=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.userId&&e.hasOwnProperty("userId")&&!s.isString(e.userId)?"userId: string expected":null!=e.userChannel&&e.hasOwnProperty("userChannel")&&!s.isString(e.userChannel)?"userChannel: string expected":null!=e.sub&&e.hasOwnProperty("sub")&&!s.isString(e.sub)?"sub: string expected":null},e.fromObject=function(e){if(e instanceof a.Uuid)return e;var t=new a.Uuid;return null!=e.userId&&(t.userId=String(e.userId)),null!=e.userChannel&&(t.userChannel=String(e.userChannel)),null!=e.sub&&(t.sub=String(e.sub)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.userId="",n.userChannel="",n.sub=""),null!=e.userId&&e.hasOwnProperty("userId")&&(n.userId=e.userId),null!=e.userChannel&&e.hasOwnProperty("userChannel")&&(n.userChannel=e.userChannel),null!=e.sub&&e.hasOwnProperty("sub")&&(n.sub=e.sub),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.GetHistoryResponse=function(){function e(e){if(this.historyMessages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.historyMessages=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.historyMessages&&e.historyMessages.length)for(var n=0;n<e.historyMessages.length;++n)a.HistoryMessages.encode(e.historyMessages[n],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.GetHistoryResponse;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.historyMessages&&r.historyMessages.length||(r.historyMessages=[]),r.historyMessages.push(a.HistoryMessages.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.historyMessages&&e.hasOwnProperty("historyMessages")){if(!Array.isArray(e.historyMessages))return"historyMessages: array expected";for(var t=0;t<e.historyMessages.length;++t){var n=a.HistoryMessages.verify(e.historyMessages[t]);if(n)return"historyMessages."+n}}return null},e.fromObject=function(e){if(e instanceof a.GetHistoryResponse)return e;var t=new a.GetHistoryResponse;if(e.historyMessages){if(!Array.isArray(e.historyMessages))throw TypeError(".GetHistoryResponse.historyMessages: array expected");t.historyMessages=[];for(var n=0;n<e.historyMessages.length;++n){if("object"!=typeof e.historyMessages[n])throw TypeError(".GetHistoryResponse.historyMessages: object expected");t.historyMessages[n]=a.HistoryMessages.fromObject(e.historyMessages[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.historyMessages=[]),e.historyMessages&&e.historyMessages.length){n.historyMessages=[];for(var r=0;r<e.historyMessages.length;++r)n.historyMessages[r]=a.HistoryMessages.toObject(e.historyMessages[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.HistoryMessages=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.content="",e.prototype.contentId="",e.prototype.timeCreated="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.content&&Object.hasOwnProperty.call(e,"content")&&t.uint32(10).string(e.content),null!=e.contentId&&Object.hasOwnProperty.call(e,"contentId")&&t.uint32(18).string(e.contentId),null!=e.timeCreated&&Object.hasOwnProperty.call(e,"timeCreated")&&t.uint32(26).string(e.timeCreated),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.HistoryMessages;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.content=e.string();break;case 2:r.contentId=e.string();break;case 3:r.timeCreated=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.content&&e.hasOwnProperty("content")&&!s.isString(e.content)?"content: string expected":null!=e.contentId&&e.hasOwnProperty("contentId")&&!s.isString(e.contentId)?"contentId: string expected":null!=e.timeCreated&&e.hasOwnProperty("timeCreated")&&!s.isString(e.timeCreated)?"timeCreated: string expected":null},e.fromObject=function(e){if(e instanceof a.HistoryMessages)return e;var t=new a.HistoryMessages;return null!=e.content&&(t.content=String(e.content)),null!=e.contentId&&(t.contentId=String(e.contentId)),null!=e.timeCreated&&(t.timeCreated=String(e.timeCreated)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.content="",n.contentId="",n.timeCreated=""),null!=e.content&&e.hasOwnProperty("content")&&(n.content=e.content),null!=e.contentId&&e.hasOwnProperty("contentId")&&(n.contentId=e.contentId),null!=e.timeCreated&&e.hasOwnProperty("timeCreated")&&(n.timeCreated=e.timeCreated),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),a.google=((n={}).protobuf=((t={}).DoubleValue=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(9).double(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.google.protobuf.DoubleValue;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.value=e.double();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.value&&e.hasOwnProperty("value")&&"number"!=typeof e.value?"value: number expected":null},e.fromObject=function(e){if(e instanceof a.google.protobuf.DoubleValue)return e;var t=new a.google.protobuf.DoubleValue;return null!=e.value&&(t.value=Number(e.value)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.value=0),null!=e.value&&e.hasOwnProperty("value")&&(n.value=t.json&&!isFinite(e.value)?String(e.value):e.value),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),t.FloatValue=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(13).float(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.google.protobuf.FloatValue;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.value=e.float();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.value&&e.hasOwnProperty("value")&&"number"!=typeof e.value?"value: number expected":null},e.fromObject=function(e){if(e instanceof a.google.protobuf.FloatValue)return e;var t=new a.google.protobuf.FloatValue;return null!=e.value&&(t.value=Number(e.value)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.value=0),null!=e.value&&e.hasOwnProperty("value")&&(n.value=t.json&&!isFinite(e.value)?String(e.value):e.value),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),t.Int64Value=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=s.Long?s.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(8).int64(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.google.protobuf.Int64Value;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.value=e.int64();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.value&&e.hasOwnProperty("value")&&!(s.isInteger(e.value)||e.value&&s.isInteger(e.value.low)&&s.isInteger(e.value.high))?"value: integer|Long expected":null},e.fromObject=function(e){if(e instanceof a.google.protobuf.Int64Value)return e;var t=new a.google.protobuf.Int64Value;return null!=e.value&&(s.Long?(t.value=s.Long.fromValue(e.value)).unsigned=!1:"string"==typeof e.value?t.value=parseInt(e.value,10):"number"==typeof e.value?t.value=e.value:"object"==typeof e.value&&(t.value=new s.LongBits(e.value.low>>>0,e.value.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults)if(s.Long){var r=new s.Long(0,0,!1);n.value=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.value=t.longs===String?"0":0;return null!=e.value&&e.hasOwnProperty("value")&&("number"==typeof e.value?n.value=t.longs===String?String(e.value):e.value:n.value=t.longs===String?s.Long.prototype.toString.call(e.value):t.longs===Number?new s.LongBits(e.value.low>>>0,e.value.high>>>0).toNumber():e.value),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),t.UInt64Value=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=s.Long?s.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(8).uint64(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.google.protobuf.UInt64Value;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.value=e.uint64();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.value&&e.hasOwnProperty("value")&&!(s.isInteger(e.value)||e.value&&s.isInteger(e.value.low)&&s.isInteger(e.value.high))?"value: integer|Long expected":null},e.fromObject=function(e){if(e instanceof a.google.protobuf.UInt64Value)return e;var t=new a.google.protobuf.UInt64Value;return null!=e.value&&(s.Long?(t.value=s.Long.fromValue(e.value)).unsigned=!0:"string"==typeof e.value?t.value=parseInt(e.value,10):"number"==typeof e.value?t.value=e.value:"object"==typeof e.value&&(t.value=new s.LongBits(e.value.low>>>0,e.value.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults)if(s.Long){var r=new s.Long(0,0,!0);n.value=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.value=t.longs===String?"0":0;return null!=e.value&&e.hasOwnProperty("value")&&("number"==typeof e.value?n.value=t.longs===String?String(e.value):e.value:n.value=t.longs===String?s.Long.prototype.toString.call(e.value):t.longs===Number?new s.LongBits(e.value.low>>>0,e.value.high>>>0).toNumber(!0):e.value),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),t.Int32Value=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(8).int32(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.google.protobuf.Int32Value;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.value=e.int32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.value&&e.hasOwnProperty("value")&&!s.isInteger(e.value)?"value: integer expected":null},e.fromObject=function(e){if(e instanceof a.google.protobuf.Int32Value)return e;var t=new a.google.protobuf.Int32Value;return null!=e.value&&(t.value=0|e.value),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.value=0),null!=e.value&&e.hasOwnProperty("value")&&(n.value=e.value),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),t.UInt32Value=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(8).uint32(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.google.protobuf.UInt32Value;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.value=e.uint32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.value&&e.hasOwnProperty("value")&&!s.isInteger(e.value)?"value: integer expected":null},e.fromObject=function(e){if(e instanceof a.google.protobuf.UInt32Value)return e;var t=new a.google.protobuf.UInt32Value;return null!=e.value&&(t.value=e.value>>>0),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.value=0),null!=e.value&&e.hasOwnProperty("value")&&(n.value=e.value),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),t.BoolValue=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(8).bool(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.google.protobuf.BoolValue;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.value=e.bool();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.value&&e.hasOwnProperty("value")&&"boolean"!=typeof e.value?"value: boolean expected":null},e.fromObject=function(e){if(e instanceof a.google.protobuf.BoolValue)return e;var t=new a.google.protobuf.BoolValue;return null!=e.value&&(t.value=Boolean(e.value)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.value=!1),null!=e.value&&e.hasOwnProperty("value")&&(n.value=e.value),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),t.StringValue=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(10).string(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.google.protobuf.StringValue;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.value=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.value&&e.hasOwnProperty("value")&&!s.isString(e.value)?"value: string expected":null},e.fromObject=function(e){if(e instanceof a.google.protobuf.StringValue)return e;var t=new a.google.protobuf.StringValue;return null!=e.value&&(t.value=String(e.value)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.value=""),null!=e.value&&e.hasOwnProperty("value")&&(n.value=e.value),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),t.BytesValue=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=s.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(10).bytes(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new a.google.protobuf.BytesValue;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.value=e.bytes();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.value&&e.hasOwnProperty("value")&&!(e.value&&"number"==typeof e.value.length||s.isString(e.value))?"value: buffer expected":null},e.fromObject=function(e){if(e instanceof a.google.protobuf.BytesValue)return e;var t=new a.google.protobuf.BytesValue;return null!=e.value&&("string"==typeof e.value?s.base64.decode(e.value,t.value=s.newBuffer(s.base64.length(e.value)),0):e.value.length&&(t.value=e.value)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.value="":(n.value=[],t.bytes!==Array&&(n.value=s.newBuffer(n.value)))),null!=e.value&&e.hasOwnProperty("value")&&(n.value=t.bytes===String?s.base64.encode(e.value,0,e.value.length):t.bytes===Array?Array.prototype.slice.call(e.value):e.value),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),t),n),a))})),VpsVersion;VpsVersion=exports.VpsVersion||(exports.VpsVersion={}),VpsVersion[VpsVersion["1.0"]=1]="1.0",VpsVersion[VpsVersion["2.0"]=2]="2.0",VpsVersion[VpsVersion["3.0"]=3]="3.0",VpsVersion[VpsVersion["4.0"]=4]="4.0",VpsVersion[VpsVersion["5.0"]=5]="5.0";var MessageNames={ANSWER_TO_USER:"ANSWER_TO_USER",STT:"STT",MUSIC_RECOGNITION:"MUSIC_RECOGNITION",DO_NOTHING:"DO_NOTHING"},excludeTags=["A","AUDIO","BUTTON","INPUT","OPTION","SELECT","TEXTAREA","VIDEO"];function inIframe(){try{return window.self!==window.top}catch(e){return!0}}if("undefined"!=typeof window&&inIframe()){var postMessage_1=function(e){var t;null===(t=window.top)||void 0===t||t.postMessage(JSON.stringify(e),"*")},historyBack_1=function(){var e=window.location.href;window.history.back(),setTimeout((function(){window.location.href===e&&postMessage_1({type:"close"})}),500)};window.appInitialData=[],window.AssistantHost={sendDataContainer:function(e){postMessage_1({type:"sendDataContainer",payload:e})},close:function(){postMessage_1({type:"close"})},sendData:function(e){postMessage_1({type:"sendData",payload:e})},setSuggests:function(e){postMessage_1({type:"setSuggests",payload:e})},setHints:function(e){postMessage_1({type:"setHints",payload:e})},ready:function(){postMessage_1({type:"ready"})},sendText:function(e){postMessage_1({type:"sendText",payload:e})},setHeaderButtons:function(e){postMessage_1({type:"setHeaderButtons",payload:e})}},window.addEventListener("message",(function(e){var t,n,r,o,i,s,a,u;try{if("string"==typeof e.data){var l=JSON.parse(e.data);switch(l.type){case"onBack":historyBack_1();break;case"onData":null===(n=null===(t=window.AssistantClient)||void 0===t?void 0:t.onData)||void 0===n||n.call(t,l.payload);break;case"onRequestState":var c=null===(o=null===(r=window.AssistantClient)||void 0===r?void 0:r.onRequestState)||void 0===o?void 0:o.call(r);postMessage_1({type:"state",payload:c,requestId:l.requestId});break;case"onRequestRecoveryState":var f=null===(s=null===(i=window.AssistantClient)||void 0===i?void 0:i.onRequestRecoveryState)||void 0===s?void 0:s.call(i);postMessage_1({type:"recoveryState",payload:f});break;case"onStart":null===(u=null===(a=window.AssistantClient)||void 0===a?void 0:a.onStart)||void 0===u||u.call(a);break;default:console.error(e,"Unknown parsed message")}}}catch(e){console.error(e,"Unknown message")}})),window.addEventListener("keydown",(function(e){var t,n;switch(e.code){case"Enter":document.activeElement&&!excludeTags.includes(document.activeElement.tagName)&&(null===(n=(t=document.activeElement).click)||void 0===n||n.call(t));break;case"Escape":historyBack_1()}}))}var createAssistant=function(e){var t,n=e.getState,r=e.getRecoveryState,o=e.ready,i=void 0===o||o,s=n,a=r,u=!1,l=createNanoEvents(),c=l.on,f=l.emit,p=createNanoEvents(),d=p.on,y=p.emit,g=new Map,h=function(e){return"smart_app_data"===e.type&&f("command",e.smart_app_data),"smart_app_error"===e.type&&f("error",e.smart_app_error),f("data",e)},m=void 0!==(null===(t=window.AssistantHost)||void 0===t?void 0:t.cancelTts)?function(){var e,t;null===(t=(e=window.AssistantHost).cancelTts)||void 0===t||t.call(e,"")}:void 0,v=function(e){void 0===window.__ASSISTANT_CLIENT__.firstSmartAppDataMid&&(window.__ASSISTANT_CLIENT__.firstSmartAppDataMid=e)};window.AssistantClient={onData:function(e){var t,n,r,o,i;if(!appInitialData.isCommitted(e)&&(y(e.type,e),"smart_app_data"===e.type&&"-1"!==((null===(t=e.sdk_meta)||void 0===t?void 0:t.mid)||"-1")&&v(null===(n=e.sdk_meta)||void 0===n?void 0:n.mid),"system"!==e.type||"BACK"!==(null===(o=null===(r=e.system)||void 0===r?void 0:r.command)||void 0===o?void 0:o.toUpperCase()))){if("tts_state_update"===e.type&&f("tts",{state:e.state,owner:e.owner}),("smart_app_data"===e.type||"smart_app_error"===e.type)&&(null===(i=e.sdk_meta)||void 0===i?void 0:i.requestId)&&g.has(e.sdk_meta.requestId)){var s=e.sdk_meta,a=(s.requestId,__rest(s,["requestId"])),u=g.get(e.sdk_meta.requestId)||{},l=u.requestId,c=u.next;(Object.keys(a).length>0||l)&&(e.sdk_meta=__assign({},a),l&&(e.sdk_meta={requestId:l})),null==c||c((e.type,e))}h(e)}},onRequestState:function(){return s()},onRequestRecoveryState:function(){if(a)return a()},onStart:function(){f("start"),u||(appInitialData.diff().forEach((function(e){return h(e)})),u=!0)}};var b=function(){var e,t,n,r=(null===(t=null===(e=appInitialData.get().find((function(e){var t;return"smart_app_data"===e.type&&"-1"!==((null===(t=e.sdk_meta)||void 0===t?void 0:t.mid)||"-1")})))||void 0===e?void 0:e.sdk_meta)||void 0===t?void 0:t.mid)||"-1";"-1"!==r&&v(r),appInitialData.commit(),null===(n=window.AssistantHost)||void 0===n||n.ready()};i&&window.setTimeout(b);var O=function(e,t){var n,r,o,i=e.action,s=e.name,a=e.requestId;if(null===(n=window.AssistantHost)||void 0===n?void 0:n.sendDataContainer){if(null==t)return null===(r=window.AssistantHost)||void 0===r||r.sendDataContainer(JSON.stringify({data:i,message_name:s||"",requestId:a})),function(){};if(a&&g.has(a))throw new Error("requestId должен быть уникальным");var u=a||v4(),l=(0,createNanoObservable((function(e){var t,n=e.next;null===(t=window.AssistantHost)||void 0===t||t.sendDataContainer(JSON.stringify({data:i,message_name:s||"",requestId:u})),g.set(u,{next:n,requestId:a})})).subscribe)({next:t}).unsubscribe;return function(){l(),g.delete(u)}}if(null!=t)throw new Error("Не поддерживается в данной версии клиента");return null===(o=window.AssistantHost)||void 0===o||o.sendData(JSON.stringify(i),s||null),function(){}};return{cancelTts:m,close:function(){var e;return null===(e=window.AssistantHost)||void 0===e?void 0:e.close()},getInitialData:appInitialData.pull,findInInitialData:appInitialData.find,getRecoveryState:function(){return window.appRecoveryState},on:c,subscribeToCommand:d,sendAction:function(e,t,n,r){var o=void 0===r?{}:r,i=o.name,s=o.requestId;return O({action:e,name:i,requestId:s},(function(e){"smart_app_data"===e.type&&(null==t||t(e.smart_app_data)),"smart_app_error"===e.type&&(null==n||n(e.smart_app_error))}))},sendData:O,setGetState:function(e){s=e},setGetRecoveryState:function(e){a=e},setSuggests:function(e){var t;null===(t=window.AssistantHost)||void 0===t||t.setSuggests(JSON.stringify({suggestions:{buttons:e}}))},setHints:function(e){var t;null===(t=window.AssistantHost)||void 0===t||t.setHints(JSON.stringify({hints:e}))},sendText:function(e){var t;return null===(t=window.AssistantHost)||void 0===t?void 0:t.sendText(e)},setHeaderButtons:function(e){var t,n;if(!(null===(t=window.AssistantHost)||void 0===t?void 0:t.setHeaderButtons))throw new Error("setHeaderButtons не поддерживается в данной версии клиента");null===(n=window.AssistantHost)||void 0===n||n.setHeaderButtons(JSON.stringify(e))},ready:b}};"undefined"!=typeof window&&(window.__ASSISTANT_CLIENT__={version:"1.16.2"}),exports.Message=proto.Message,exports.MessageNames=MessageNames,exports.createAssistant=createAssistant,Object.defineProperty(exports,"__esModule",{value:!0})}));
